<ion-content [fullscreen]="true">
  <div class="h-100 row mx-1">
    <div class="col-3 text-center">
      <div>
        <button class="btn btn-primary btn-lg m-2 w-100" (click)="navigate('entrada')">Nova entrada</button>
      </div>
      <div>
        <button class="btn btn-primary btn-lg m-2 w-100" (click)="navigate('saida')">Nova saída</button>
      </div>
      <div class="d-none">
        <button class="btn btn-primary btn-lg m-2 w-100" (click)="navigate('estoque')">Estoque</button>
      </div>
    </div>
    <div class="col-9">
      <fieldset class="border-fieldset mt-3 p-3">
        <legend class="legend-fieldset"><span>Registros</span></legend>

        <form class="mt-4">
          <div class="row">
            <div class="col-3">
              <p>N° da nota: </p><input class="form-control" type="number" [(ngModel)]="noteNumber" name="note">
            </div>
            <div class="col-5">
              <p>Paciente: </p><input class="form-control" type="text" name="patient" [(ngModel)]="patient" placeholder="Nome do paciente">
            </div>
            <div class="col-4">
              <p>Médico: </p><input class="form-control" type="text" name="doctor" [(ngModel)]="doctor" placeholder="Nome do médico">
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-6">
              <p>Fornecedor: </p><input class="form-control" type="text" [(ngModel)]="provider" name="provider">
            </div>
            <div class="col-4">
              <p>Data: </p><input class="form-control" type="date" name="date" [(ngModel)]="date" placeholder="Nome do paciente">
            </div>
            <div class="col-2 align-self-end text-end">
              <a (click)="consulta()"><ion-icon name="search" size="large"></ion-icon></a>
            </div>
          </div>
        </form>
      </fieldset>
    </div>

    <div>
      <button (click)="movementsLoad()" class="btn btn-primary btn-sm mt-5">
        <ion-icon class="text-white icon" name="refresh" size="small"></ion-icon>Atualizar
      </button>
    </div>

    <table class="table">
      <thead>
        <tr>
          <th scope="col"></th>
          <th scope="col">N° nota</th>
          <th scope="col">Série(s)</th>
          <th scope="col">Fornecedor</th>
          <th scope="col">Médico</th>
          <th scope="col">Paciente</th>
          <th scope="col">Data emissão</th>
          <th scope="col">Movimento</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let movement of movements; let i=index">
          <td scope="row" class="text-center">
            <ion-icon class="text-primary h5 me-2" name="create" (click)="openNote(i)"></ion-icon>
          </td>
          <td>{{movement.numNota}}</td>
          <td><span class="d-block" *ngFor="let item of itens[i]">{{item}}</span></td>
          <td>{{movement.fornecedor}}</td>
          <td>{{movement.medico}}</td>
          <td>{{movement.paciente}}</td>
          <td>{{movement.dataEmissao}}</td>
          <td>{{movement.movimentacao}}</td>
        </tr>
      </tbody>
    </table>
  </div>

  

  <ng-template #entrada>
    <div class="modal-header bg-primary">
      <h4 class="modal-title text-white">Incluir Nota Fiscal</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <form class="mt-2">
          <div class="row">
            <div class="col-3">
              <p>N° da nota: </p><input class="form-control" type="number" [(ngModel)]="noteNumber" name="note">
            </div>
            <div class="col-4">
              <p>Fornecedor: </p><input class="form-control" type="text" [(ngModel)]="provider" name="provider">
            </div>
            <div class="col-5">
              <p>Data: </p><input class="form-control" type="date" name="date" [(ngModel)]="date" placeholder="Nome do paciente">
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-6">
              <p>Paciente: </p><input class="form-control" type="text" name="patient" [(ngModel)]="patient" placeholder="Nome do paciente">
            </div>
            <div class="col-6">
              <p>Médico: </p><input class="form-control" type="text" name="doctor" [(ngModel)]="doctor" placeholder="Nome do médico">
            </div>
          </div>
          <p class="my-3">Itens:</p>
          <div class="row itens">
            <div class="col-8">
              <input class="form-control" type="text" placeholder="Item">
            </div>
            <div class="col-4">
              <input class="form-control" type="number" placeholder="Quantidade">
            </div>
          </div>
          <div class="my-3 text-end">
            <button class="btn btn-primary me-2">Confirmar</button>
            <button class="btn btn-danger">Cancelar</button>
          </div>
        </form>
    </div>
  </ng-template>

</ion-content>